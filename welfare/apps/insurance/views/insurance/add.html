<script>
  $(function() {
    var availableTags = [
        {{#member}}
            "{{registerIdCard}}",    
        {{/member}}
    ];
    $( "#SearchName" ).autocomplete({
      source: availableTags
    });
  });
  </script>
<!-- Page Content -->
<div class="page-content">
    <!-- Page Breadcrumb -->
    <div class="page-breadcrumbs">
        <ul class="breadcrumb">
            <li>
                <i class="fa fa-home"></i>
                <a href="#">{{#i18n}}home{{/i18n}}</a>
            </li>
            <li class="active">{{#i18n}}listinsurance{{/i18n}}</li>
        </ul>
    </div>
    <!-- /Page Breadcrumb -->
    <!-- Page Header -->
    <div class="page-header position-relative">
        <div class="header-title">
            <h1>
                
            </h1>
        </div>
        <!--Header Buttons-->

        <!--Header Buttons End-->
    </div>
    <!-- /Page Header -->
    <!-- Page Body -->
    <div class="page-body">
        <div class="row">
            <div class="col-lg-12 col-sm-12 col-xs-12">
                <div class="widget radius-bordered">
                    <div class="widget-header">
                        <span class="widget-caption">{{#i18n}}listinsurance{{/i18n}}</span>
                    </div>
                    <div class="widget-body">
                        <form  class="form-horizontal">
                            <div class="form-title">
                                {{#i18n}}pleaseinput{{/i18n}}
                            </div>
                            
                             <div class="form-group">
                                <label class="col-lg-3 control-label">{{#i18n}}inputcardid{{/i18n}}</label>
                                <div class="col-lg-7">
                                    <input type="text" class="form-control" name="firstName" id="SearchName" placeholder="{{#i18n}}inputcardid{{/i18n}}"
                                           data-bv-notempty="true" value="{{#member}}{{registerIdCard}}{{/member}}"
                                           data-bv-notempty-message="{{#i18n}}inputcardid{{/i18n}}" />
                                     <p id="demo" style="color:#d14"></p>
                                </div>
                                
                                <div class="col-lg-2">
                                <button id="btnsearch" name="bn" class="btn btn-default"  type="button"> <i class="fa fa-search"></i>ค้นหา</button>
                                </div>
                                
                            </div>
                            {{#member}}
                            <div class="form-group">
                                <label class="col-lg-3 control-label">{{#i18n}}name{{/i18n}}</label>
                                <div class="col-lg-9">
                                    <input type="text" class="form-control" name="firstName" disabled="" placeholder="{{#i18n}}name{{/i18n}}"
                                           data-bv-notempty="true" id="registerNameTh" value="{{registerNameTh}}"
                                           data-bv-notempty-message="{{#i18n}}name{{/i18n}}" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-lg-3 control-label">{{#i18n}}lastname{{/i18n}}</label>
                                <div class="col-lg-9">
                                    <input type="text" class="form-control" name="firstName" disabled="" placeholder="{{#i18n}}lastname{{/i18n}}"
                                           data-bv-notempty="true" id="registerLastNameTh" value="{{registerLastNameTh}}"
                                           data-bv-notempty-message="{{#i18n}}lastname{{/i18n}}" />
                                </div>
                                
                            </div>
                            {{/member}}
                            <div class="form-group">
                                <label class="col-lg-3 control-label">{{#i18n}}hospitalmedical{{/i18n}}</label>
                                <div class="col-lg-9">
                                    <input type="text" class="form-control" name="firstName" placeholder="{{#i18n}}hospitalmedical{{/i18n}}"
                                           data-bv-notempty="true" id="hospitalname"
                                           data-bv-notempty-message="{{#i18n}}hospitalmedical{{/i18n}}" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="reservation" class="col-lg-3 control-label">{{#i18n}}welfaredatestart{{/i18n}}</label>
                                <div class="controls col-lg-9">
                                   <div class="input-group">
                                        <input class="form-control date-picker" id="datestart" type="text" data-date-format="dd-mm-yyyy">
                                        <span class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="reservation" class="col-lg-3 control-label">{{#i18n}}welfaredateend{{/i18n}}</label>
                                <div class="controls col-lg-9">
                                    <div class="input-group">
                                        <input class="form-control date-picker" id="dateend" type="text" data-date-format="dd-mm-yyyy">
                                        <span class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                
                                    <div class="col-lg-offset-6 col-lg-8">
                                        <input class="btn btn-palegreen" id="btn_submit" type="submit" value="{{#i18n}}button.submit{{/i18n}}" />
                                        <input class="btn btn-default" type="submit" value="{{#i18n}}button.cancel{{/i18n}}" />
                                    </div>
                                
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>



    </div>
    <!-- /Page Body -->
</div>
<!-- /Page Content -->
<!-- /Page Content -->


<!--Bootstrap Date Picker-->
    

    <!--Bootstrap Time Picker-->
<!--    <script src="assets/js/datetime/bootstrap-timepicker.js"></script>-->

    <!--Bootstrap Date Range Picker-->
<!--    <script src="assets/js/datetime/moment.js"></script>-->
<!--    <script src="assets/js/datetime/daterangepicker.js"></script>-->
    
<script type="text/javascript">

    $(document).ready(function () {

        $("#btn_submit").click(function () {
            var data = {};
            data['registerIdCard'] = $("#SearchName").val();
            data['hospitalname'] = $("#hospitalname").val();
            data['datestart'] = $("#datestart").val();
            data['dateend'] = $("#dateend").val();
            
            
            var jdata = {};
            jdata['data'] = data;
            $.ajax({
                url: '{{_context_path}}/api/insurance/insurance/save',
                data: jsonEncode(jdata),
                type: 'post', // 'or get'
                success: function (result) {
                    alert(result.save);
                    //alert(result.message);
                    getHTML('content-body','{{_context_path}}/api/insurance/view/insurance/list');
                }
            });
            return false;
        });
        

    });
    
     $('.date-picker').datepicker();
</script>
<script>
    $("#btnsearch").click(function () {
        var SearchName = $("#SearchName").val();
        if(SearchName==""){
            document.getElementById("demo").innerHTML = "กรุณากรอกเลขบัตรประชาชน";
        }else{
        
        var data = {"SearchName":SearchName};
//       
        
        getHTML('content-body','{{_context_path}}/api/insurance/insurance/view/search',data);
        }
    });
    
 </script>
